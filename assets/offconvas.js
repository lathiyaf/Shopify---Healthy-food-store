!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e,n=".offcanvas",o=!1,s=function(t,e){this.element=t,this.options=e,this.init()};function i(t){this.options.callbacks&&this.options.callbacks[t]&&this.options.callbacks[t].apply(this)}s.prototype.defaults={openClass:"offcanvas-open",closeElement:".c-offcanvas__close",showOverlay:!0,callbacks:null},s.prototype.init=function(){if(this.options=t.extend({},this.defaults,this.options),this.offcanvasSource=this.element.hasAttribute("data-offcanvas-src")?this.element.getAttribute("data-offcanvas-src"):this.element.getAttribute("href"),this.offcanvasContent=document.querySelector(this.offcanvasSource),this.offcanvasContent)return t(this.element).on("click"+n,t.proxy(this.toggle,this)),this},s.prototype.toggle=function(t){t&&t.type&&t.preventDefault(),o?this.close():this.open()},s.prototype.open=function(){var s=this;i.call(this,"beforeOpen"),this.element.setAttribute("aria-expanded",!0),this.offcanvasContent.setAttribute("aria-hidden",!1),this.options.showOverlay&&function(){var o;o=document.createDocumentFragment(),e||((e=document.createElement("a")).className="c-offcanvas-overlay",e.setAttribute("href","#"),e.innerHTML='<span class="u-hideVisually">Exit Menu</span>'),o.appendChild(e),document.body.appendChild(o),t(e).on("click"+n,t.proxy(this.close,this))}.call(this),t(this.options.closeElement).on("click"+n,t.proxy(this.close,this)),t(document).on("keyup"+n,function(t){27===t.keyCode&&s.close()}),setTimeout(function(){s.offcanvasContent.classList.add(s.options.openClass),document.querySelector("body").classList.add(s.options.openClass)},20),o=!0,i.call(this,"open")},s.prototype.close=function(s){if(s&&s.type&&s.preventDefault(),i.call(this,"beforeClose"),this.element.setAttribute("aria-expanded",!1),this.offcanvasContent.setAttribute("aria-hidden",!0),this.options.showOverlay){var a=function(){var t,e=document.createElement("fake"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}();t(e).off("click"+n),t(e).one(a,function(){e.parentNode&&e.parentNode.removeChild(e)})}t(this.options.closeElement).off("click"+n),t(document).off("keyup"+n),this.offcanvasContent.classList.remove(this.options.openClass),document.querySelector("body").classList.remove(this.options.openClass),o=!1,i.call(this,"close")},t.fn.offcanvas=function(e){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=t(this),i=o.data("offcanvas");i?"string"==typeof e&&i[e].apply(i,n):o.data("offcanvas",new s(this,e))})}});